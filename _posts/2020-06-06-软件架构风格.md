---
layout:     post
title:      "软件架构风格"
subtitle:   ""
date:       2020-05-19 23:23:23
author:     "胡荣"
header-img: "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1589911803348&di=a99eaa726dcc408fb76dff862db1ad23&imgtype=0&src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D1377123034%2C2807315341%26fm%3D214%26gp%3D0.jpg"
tags:
  - 架构
---


微服务是近几年流行起来的软件架构风格。

回顾历史，从传统的单体应用架构，到面向服务架构SOA，再到如今流行的微服务架构MSA。

本质上来说，都是为了解决随着软件复杂度的上升，如何有效提升开发效率，发布效率的问题。

阿里巴巴2008年5月立项了"五彩石"项目, 对电商系统做了拆分, 完成服务化改造。

其中孕育出以HSF、Notify为代表的分布式中间件组件

更是在随后十年时间，从软负载中心Config Server、配置中心Diamond Server，到全链路追踪EagleEye、限流Sentinel，再到全链路压测体系

可以说，基于分布式中间件构建的整个服务化体系是支撑"双十一“万亿流量的技术基石

但，“没有银弹”的定律是不变的。微服务架构在提升开发效率，提升系统拓展能力的同事，也带来更多的复杂性

比如：

- 运维需要投入更多成本 （服务编排、治理、安全、监测）
- 跨进程通信联调的问题 (一致性、可用性)
- 学习分布式系统的能力 （团队成员能力）
- 排查问题的难度上升

因此，采用微服务架构，要对自己的业务，技术团队有足够清醒的了解，切勿为了微服务而微服务。

## 架构的不同风格

根据软件系统在运行期的表现风格和部署结构，我们可以粗略地分为两大类：

1. 整个系统的所有功能单元，整体部署到同一个进程, 则称之为 __单体结构 (Monolithic Architecture)__
2. 整个系统的功能单元分散到不同的进程，然后由多个进程共同提供不同的业务能力, 则称之为 __分布式结构 (Distributed Architecture)__

> 任何一个体系（产品、平台、商业模式等）如果想要发展壮大，途径只有两个模式：

> 容器模式：从外部提供越来越多的资源和能力，注入到体系的内部，不断的从内扩充自己。单体架构的系统类似这种模式。 

> 生态模式：以自己的核心能力为内核，持续的在外部吸引合作者，形成一个可以不断成长的生态体系。分布式架构越来越像这种模式。

对于单体架构，我们根据设计期和开发实现期的不同模式和划分结构，可以分为：

- 简单单体模式：代码层面没有拆分，所有的业务逻辑都在一个项目（project）里打包后进行部署上线；
- MVC模式：系统内每个模块的功能组件按照不同的职责划分为模型（Model）、视图（View）、控制器（Controller）来组织研发实现工作；
- 前后端分离模式：将前后端代码耦合的设计改为前端逻辑和后端逻辑独立编写实现的处理模式；
- 组件模式：系统的每一个模块拆分为一个子项目（subproject），每个模块独立编译打包成一个组件，然后所有需要的组件一起再部署到同一个容器里；
- 类库模式：A系统需要复用B系统的某些功能，这时可以直接把B系统的某些组件作为依赖库，打包到A系统来使用。

对于分布式架构，我们根据设计期的架构思想和运行期的不同结构，可以分为：

- 面向服务架构（Service Oriented Architecture，SOA）：以业务服务的角度和服务总线的方式（一般是WebService与ESB）考虑系统架构和企业IT治理；
- 分布式服务架构（Distributed Service Architecture，DSA）：基于去中心化的分布式服务框架与技术，考虑系统架构和服务治理；
- 微服务架构（MicroServices Architecture，MSA）：微服务架构可以看做是面向服务架构和分布式服务架构的拓展，使用更细粒度的服务（所以叫微服务）和一组设计准则来考虑大规模的复杂系统架构设计。

未完待续...

[1]: https://www.zhihu.com/question/51017125
[3]: https://www.cnblogs.com/xianshiwang/p/13230384.html
[4]: https://blog.csdn.net/suifeng3051/article/details/53992560
[5]: https://www.zhihu.com/question/56125281